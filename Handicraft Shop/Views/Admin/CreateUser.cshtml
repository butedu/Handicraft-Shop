@using Handicraft_Shop.Models;
@model NGUOIDUNG

@{
    ViewBag.Title = "Thêm Người dùng mới";
    Layout = "~/Views/Shared/AdminLayout.cshtml";
}

<h2 style="margin-top: 20px">Thêm Người dùng mới</h2>

<div class="form-container">
    @using (Html.BeginForm("CreateUser", "Admin", FormMethod.Post, new { id = "createUserForm" }))
    {
        <div class="form-group">
            <label>Tên người dùng:</label>
            @Html.EditorFor(model => model.TENNGUOIDUNG, new { htmlAttributes = new { @class = "form-control required-field", @placeholder = "Nhập tên người dùng" } })
        </div>

        <div class="form-group">
            <label>Tài khoản:</label>
            @Html.EditorFor(model => model.TAIKHOAN, new { htmlAttributes = new { @class = "form-control required-field", @placeholder = "Nhập tài khoản" } })
            @Html.ValidationMessageFor(model => model.TAIKHOAN, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            <label>Mật khẩu:</label>
            @Html.PasswordFor(model => model.MATKHAU, new { htmlAttributes = new { @class = "form-control required-field", @placeholder = "Nhập mật khẩu", id = "passwordField" } })
            <span class="text-danger" id="passwordError"></span>
        </div>

        <div class="form-group">
            <label>Email:</label>
            @Html.EditorFor(model => model.EMAIL, new { htmlAttributes = new { @class = "form-control required-field", @placeholder = "Nhập email" } })
            @Html.ValidationMessageFor(model => model.EMAIL, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            <label>Số điện thoại:</label>
            @Html.EditorFor(model => model.SODIENTHOAI, new { htmlAttributes = new { @class = "form-control required-field", @placeholder = "Nhập số điện thoại" } })
            @Html.ValidationMessageFor(model => model.SODIENTHOAI, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            <label>Quyền:</label>
            <select class="form-control required-field" name="SelectedRole">
                <option value="">Chọn quyền</option>
                <option value="Q01">Admin</option>
                <option value="Q02">Nhân Viên Bán Hàng</option>
                <option value="Q03">Khách Hàng</option>
                <option value="Q04">Nhân Viên Kho Hàng</option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary save">Lưu</button>
    }
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $("#createUserForm").on("submit", function (e) {
            let isValid = true;

            $(".required-field").each(function () {
                if (!$(this).val().trim()) {
                    isValid = false;
                    $(this).focus();
                    alert("Vui lòng nhập đầy đủ thông tin!");
                    return false; // Dừng kiểm tra thêm
                }
            });

            // Kiểm tra trường mật khẩu
            if ($("#passwordField").val().trim() === "") {
                $("#passwordError").text("Mật khẩu không được để trống.");
                $("#passwordField").focus();
                isValid = false;
                e.preventDefault(); // Ngăn gửi form
                return false;
            } else {
                $("#passwordError").text(""); // Xóa thông báo lỗi nếu có
            }

            if (!isValid) {
                e.preventDefault();
            }
        });
    });
</script>


<link href="~/bootstrap/bootstrap/css/Create_Edit_User.css" rel="stylesheet" />
